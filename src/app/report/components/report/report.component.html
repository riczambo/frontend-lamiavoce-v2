<div class="content-container" [@tuiFadeIn] [@tuiFadeOut]>
  <p class="page-title">Lista segnalazioni</p>
  <form
  [formGroup]="filterForm"
  (ngSubmit)="onFilterChange()"
  >
    <div tuiGroup class="group">
        <div>
          <tui-multi-select
            formControlName="selectCategorie"
            [editable]="false"
            [rows]="1"
            [style.border-radius]="'inherit'"
            [tuiTextfieldLabelOutside]="true"
            >Categorie<tui-data-list-wrapper
                        *tuiDataList
                        tuiMultiSelectGroup
                        [items]="reportService.categories"/>
          </tui-multi-select>
        </div>
        <div>
          <tui-multi-select
            formControlName="selectZone"
            [editable]="false"
            [rows]="1"
            [style.border-radius]="'inherit'"
            [tuiTextfieldLabelOutside]="true"
            >Zone<tui-data-list-wrapper
                    *tuiDataList
                    tuiMultiSelectGroup
                    [items]="reportService.zones"/>
            </tui-multi-select>
        </div>
    </div>
  </form>

  <div *ngFor="let report of reports" tuiCardLarge tuiAppearance="floating" class="report-card" [@tuiDropdownAnimation]>
    <div class="manage-buttons">
      <button
        class="manage-icon"
        appearance="secondary"
        iconStart="@tui.flag"
        size="s"
        tuiButton
        type="button"
        [style.border-radius.%]="90"
        (click)="flagContent(report)"
      ></button>
      <button
        *ngIf="isAuthenticated"
        class="manage-icon"
        appearance="secondary"
        iconStart="@tui.trash"
        size="s"
        tuiButton
        type="button"
        [style.border-radius.%]="90"
        (click)="deleteReport(report)"
      ></button>
    </div>
    <span tuiTitle class="fade report-title">
      {{report.title}}
    </span>
    <section class="report-description">{{report.description}}</section>
    <p><strong>Categoria:</strong> {{ report.category }}</p>
    <p><strong>Zona:</strong> {{ report.zone }}</p>
  </div>
  
  <div *ngIf="reports.length === 0">
    <tui-block-status>
      <tui-icon icon="@tui.square-x" size="l"></tui-icon>
      <h4>Nessuna segnalazione trovata</h4>
    </tui-block-status>
  </div>
  
</div>

<div 
    tuiAppearance="floating"
    tuiButtonGroup
    class="floating-button"
    [@tuiFadeIn]
>
    <button
    type="button"
    [routerLink]="'/create-report'">
        <tui-icon icon="@tui.circle-plus"></tui-icon>
        Crea segnalazione
    </button>
</div>