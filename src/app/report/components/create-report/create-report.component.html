<div class="create-report-form">
  <p class="page-title">Crea nuova segnalazione</p>
  <form [formGroup]="reportForm" (ngSubmit)="onSubmit()" class="form-container">
    <mat-form-field appearance="outline" class="form-label">
      <mat-label>Titolo</mat-label>
      <input matInput id="title" formControlName="title" required />
      <mat-error *ngIf="reportForm.get('title')?.invalid && reportForm.get('title')?.touched">
        Il titolo è obbligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-label">
      <mat-label>Descrizione</mat-label>
      <textarea matInput id="description" formControlName="description" required></textarea>
      <mat-error *ngIf="reportForm.get('description')?.invalid && reportForm.get('description')?.touched">
        La descrizione è obbligatoria.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-label">
      <mat-label>Codice Fiscale del cittadino</mat-label>
      <input matInput id="citizenId" formControlName="citizenId" required />
      <mat-error *ngIf="reportForm.get('citizenId')?.invalid && reportForm.get('citizenId')?.touched">
        Il codice fiscale è obbligatorio.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-label">
      <mat-label>Categoria</mat-label>
      <mat-select id="category" formControlName="category" required>
        <mat-option *ngFor="let category of categories" [value]="category">
          {{ category }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="reportForm.get('category')?.invalid && reportForm.get('category')?.touched">
        La categoria è obbligatoria.
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="form-label">
      <mat-label>Zona</mat-label>
      <mat-select id="zone" formControlName="zone" required>
        <mat-option *ngFor="let zone of zones" [value]="zone">
          {{ zone }}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="reportForm.get('zone')?.hasError('required') && reportForm.get('zone')?.touched">
        La zona è obbligatoria.
      </mat-error>      
    </mat-form-field>

    <div class="file-upload">
      <label for="fileInput" class="file-label">Allega File</label>
      <input type="file" id="fileInput" (change)="onFileSelected($event)" multiple />
      <div class="file-list" *ngIf="selectedFiles.length > 0">
        <p *ngFor="let file of selectedFiles">{{ file.name }}</p>
      </div>
    </div>

    <div class="form-actions">
      <button mat-raised-button color="primary" type="submit" [disabled]="reportForm.invalid">
        Invia Report
      </button>
      <button mat-button color="accent" type="button" (click)="navigateToReports()">
        Torna alla Home
      </button>
    </div>
  </form>
</div>
